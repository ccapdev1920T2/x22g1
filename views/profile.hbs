<!DOCTYPE html>
<html>
    <head>
        <title>{{fName}} {{lName}} | Profile</title>
        <meta name="description" content="User Profile">
        <meta name="keyword" content="profile,name,user information">
        <link href="profilestyle.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="style1.css">   
        <link rel="stylesheet" type="text/css" href="homepagestyle.css">
        <link rel="icon" href="logo.png">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src=“jquery-3.4.1.min.js” type=“text/javascript”></script>
        <script src="https://kit.fontawesome.com/080b1bc218.js" crossorigin="anonymous"></script>
    
        <script type="text/javascript">
            function openTab(evt, Post){
            var i, tabcontent, tablinks;

            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }

            document.getElementById(Post).style.display = "block";
            evt.currentTarget.className += " active";
            }
            
            function toggleUpvote(sender){
                var uvoted = document.createElement("img");
                uvoted.src = "upvoted.png";
                var dvoted = document.createElement("img");
                dvoted.src = "downvoted.png";

                var image = document.getElementById(sender.id);
                var nimage = document.getElementById(image.nextElementSibling.id);
                
                if(image.src != uvoted.src){
                    if(nimage.src == dvoted.src){
                        nimage.src = "downvote.png";
                        image.src = 'upvoted.png';
                    }
                    else{
                        image.src = 'upvoted.png';
                    }
                }
                else if(image.src == uvoted.src){
                    image.src = 'upvote.png';
                }
            }; 

            function toggleDownvote(sender){
                var uvoted = document.createElement("img");
                uvoted.src = "upvoted.png";
                var dvoted = document.createElement("img");
                dvoted.src = "downvoted.png";

                var image = document.getElementById(sender.id);
                var pimage = document.getElementById(image.previousElementSibling.id);
            
                if(image.src != dvoted.src){
                    if(pimage.src == uvoted.src){
                        pimage.src = "upvote.png";
                        image.src = 'downvoted.png';
                    }
                    else{
                        image.src = 'downvoted.png';
                    }
                }
                else if(image.src == dvoted.src){
                    image.src = 'downvote.png';
                }
            }

            $(document).ready(function(){
                document.getElementById("RecentPost").style.display = "block";
                tablinks = document.getElementsByClassName("tablinks");
                tablinks[0].className += " active";
            });

        </script>

    </head>

    <body>

        {{!-- do the header separate --}}
        {{>header}}

        <div id="container1">
            <div id="putborder">
                <div id="profilecontainer"> 
                    <div class="headertext">
                        <p>User Profile</p>
                    </div>
                    <div class="profile-header-container">   
                        <div class="profile-header-img">
                            <img class="img-circle" src="human.jpg" />
                            <div class="rank-label-container">
                                <span class="label label-default rank-label" title="Credit Score">{{CreditScore}}</span>
                            </div>
                        </div>
                        <div class="user-info-block">
                            <div class="user-heading">
                                <h2>{{Username}} <a href="editprofile.html"><i class="fas fa-user-edit fa-xs" title="Edit Profile"></i></a></h2>
                            </div>
                            <div class="textbio" title="User's Bio">{{Bio}}</div>
                        </div>
                    </div> 
                </div>
            </div>
            
        </div>

        <div id="buttoncontainer">
            <div class="button1">
                <button class="tablinks" onclick = "openTab(event,'RecentPost');" title="Recent Posts" >Recent Posts</button>
            </div>
            <div class="button2">
                <button class="tablinks" onclick = "openTab(event,'SavedPost');" title="Saved Posts">Saved Posts</button>
            </div>
        </div>

        <div class="center-post">
            <div class="col-sm-8 text-left" style="margin-left: 70px;">
                <div id="RecentPost" class="tabcontent">
                    <hr>
                    <ul class="timeline">
                        <li class="timeline-inverted">
                            <div class="timeline-badge lasalle">&#127993</i>
                            </div>
                            <div class="timeline-panel">
                                <div class="timeline-heading">
                                    <div class="postNum">{{postNumber}}</div>
                                    <h4 class="timeline-title">{{postTitle}}</h4>
                                    <div class ="dropdown">
                                        <img src="option.png" style="height: 20px; width: 23px; padding-right: 5px;" id="option1" title="Option">
                                        <div class="dropdown-content">
                                            <a href="#">Save Post</a>
                                            <a href="#">Delete</a>
                                        </div>
                                    </div>
                                </div>
                                <span class="timeline-author">
                                    <div class="author"> By: {{Username}} </div>
                                    <div class="userCreditScoree">({{CreditScore}})</div>
                                </span>
                                <div class="timeline-body">
                                    <p>{{postBody}}</p>
                                </div>
                                <div class="userTagss" title="Tags">
                                    <span>Tags: {{postTags}}</span>
                                </div>
                                <hr>
                                <div class="userbuttonscontainerr">
                                    <div class="upvotecountt" title="Upvote Count"><p>{{postUpvotes}}</p></div>                    
                                    <div class="upvote"><img src="upvote.png" id="upvote4" onclick="toggleUpvote(this)" title="Upvote"></div>
                                    <div class="downvote"><img src="downvote.png" id="downvote4" onclick="toggleDownvote(this)" title="Downvote"></div>
                                    <div class="comment"> <img src="comment.png" style="height: 48px; width: 47px; margin-left: -3px;" id="comment4" title="Comment"></div>
                                </div>  
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html>